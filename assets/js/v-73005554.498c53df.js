"use strict";(self.webpackChunkreact_hover_video_player=self.webpackChunkreact_hover_video_player||[]).push([[134],{871:(e,t,n)=>{n.r(t),n.d(t,{data:()=>r});const r={key:"v-73005554",path:"/CONTRIBUTING.html",title:"Contributing",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"Developing locally",slug:"developing-locally",children:[]},{level:2,title:"Documentation",slug:"documentation",children:[]},{level:2,title:"Tests",slug:"tests",children:[{level:3,title:"Unit tests",slug:"unit-tests",children:[]},{level:3,title:"Integration tests",slug:"integration-tests",children:[]}]},{level:2,title:"Builds",slug:"builds",children:[]},{level:2,title:"Commits",slug:"commits",children:[]}],filePathRelative:"CONTRIBUTING.md",git:{updatedTime:1625276212e3,contributors:[{name:"Ryan Geyer",email:"ryan@waymark.com",commits:3}]}}},679:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ke});var r=n(252);const o=(0,r.Wm)("h1",{id:"contributing",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#contributing","aria-hidden":"true"},"#"),(0,r.Uk)(" Contributing")],-1),l=(0,r.Wm)("h2",{id:"developing-locally",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#developing-locally","aria-hidden":"true"},"#"),(0,r.Uk)(" Developing locally")],-1),a=(0,r.Wm)("li",null,[(0,r.Wm)("code",null,"npm install")],-1),i=(0,r.Wm)("code",null,"npm run dev",-1),s=(0,r.Uk)("This will serve the contents of "),d=(0,r.Wm)("code",null,"dev/index.tsx",-1),c=(0,r.Uk)(" at "),m={href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer"},u=(0,r.Uk)("http://localhost:3000"),h=(0,r.Uk)(" with hot reloading. "),p=(0,r.Wm)("ul",null,[(0,r.Wm)("li",null,[(0,r.Uk)("You may edit the "),(0,r.Wm)("code",null,"TestComponent.tsx"),(0,r.Uk)(" file for all testing purposes. You may modify this file however you want for testing, but your changes should not be committed. If you think your changes should be committed, please contact the maintainer.")])],-1),g=(0,r.Wm)("h2",{id:"documentation",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#documentation","aria-hidden":"true"},"#"),(0,r.Uk)(" Documentation")],-1),b=(0,r.Wm)("p",null,"Please add documentation for your changes! If you add a prop, make sure to add it to the README file accordingly.",-1),k=(0,r.Uk)("The documentation site at "),W={href:"https://react-hover-video-player.dev",target:"_blank",rel:"noopener noreferrer"},f=(0,r.Uk)("https://react-hover-video-player.dev"),y=(0,r.Uk)(" uses the "),v={href:"https://vuepress.vuejs.org/",target:"_blank",rel:"noopener noreferrer"},U=(0,r.Uk)("VuePress"),w=(0,r.Uk)(" library to automatically construct a page based on the README file's contents."),T=(0,r.Uk)("To preview the documentation site locally, run "),j=(0,r.Wm)("code",null,"npm run docs:dev",-1),x=(0,r.Uk)(" to serve it at "),_={href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"},E=(0,r.Uk)("http://localhost:8080"),C=(0,r.Uk)("."),I=(0,r.Wm)("h2",{id:"tests",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#tests","aria-hidden":"true"},"#"),(0,r.Uk)(" Tests")],-1),A=(0,r.Wm)("h3",{id:"unit-tests",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#unit-tests","aria-hidden":"true"},"#"),(0,r.Uk)(" Unit tests")],-1),N=(0,r.Uk)("All unit tests can be found in the "),O=(0,r.Wm)("code",null,"tests/jest",-1),H=(0,r.Uk)(" directory. These tests are written using "),L={href:"https://github.com/facebook/jest",target:"_blank",rel:"noopener noreferrer"},P=(0,r.Uk)("jest"),V=(0,r.Uk)(" and "),D={href:"https://github.com/testing-library/react-testing-library",target:"_blank",rel:"noopener noreferrer"},R=(0,r.Uk)("react-testing-library"),B=(0,r.Uk)("."),M=(0,r.uE)("<li><p><code>npm run test</code> will run all unit tests once.</p></li><li><p><code>npm run test:watch</code> will continually re-run tests as you make changes.</p></li><li><p><code>npm run test:release</code> will perform a webpack build (<code>npm run build</code>) and then run all tests on the resulting release-ready version of the component for smoke testing purposes. Note that this is much slower and does not perform coverage testing, so you will almost always want to stick with <code>npm run test</code>.</p></li>",3),z=(0,r.Wm)("code",null,"npm run test:debug",-1),S=(0,r.Uk)(" will run the tests in a Node process that an external debugger can connect to (ie, "),G=(0,r.Wm)("a",{href:"chrome://inspect"},"chrome://inspect",-1),Y=(0,r.Uk)(") so that you can use breakpoints and step through the code as needed. See Jest's "),F={href:"https://jestjs.io/docs/troubleshooting",target:"_blank",rel:"noopener noreferrer"},J=(0,r.Uk)("troubleshooting docs"),K=(0,r.Uk)(" for more details."),q=(0,r.uE)('<p><strong>100% code coverage for unit tests is required</strong>. If you make a change, you must add a test accordingly.</p><h4 id="utils-for-writing-unit-tests" tabindex="-1"><a class="header-anchor" href="#utils-for-writing-unit-tests" aria-hidden="true">#</a> Utils for writing unit tests</h4><p>There are some handy utils available to help make writing tests easier:</p><h5 id="renderhovervideoplayer" tabindex="-1"><a class="header-anchor" href="#renderhovervideoplayer" aria-hidden="true">#</a> renderHoverVideoPlayer</h5><p><code>renderHoverVideoPlayer</code> takes a configuration and renders a <code>HoverVideoPlayer</code> component for testing. This also injects mocked behavior into the rendered video element so we can emulate how a real video element loads and plays as closely as possible in our tests.</p><p><em>Arguments</em>:</p><ul><li><code>props</code> (Object): Accepts an object representing all props to pass to the component for the test</li><li><code>videoConfig</code> (Object): Accepts an object for customizing what behavior should be simulated for the video element. Valid properties for this object are: <ul><li><code>shouldPlaybackFail</code> (Boolean): Whether we should simulate an error occuring while attempting to play the video. This is false by default.</li></ul></li></ul><p><em>Returns</em>:</p><p>An object with the following properties:</p>',9),Q=(0,r.uE)("<li><code>rerenderWithProps</code> (Function): Takes an object for new props to re-render the component with.</li><li><code>videoElement</code> (HTMLVideoElement): The video element rendered by the HoverVideoPlayer component.</li><li><code>playerContainer</code> (HTMLDivElement): The container div element rendered by the HoverVideoPlayerComponent.</li><li><code>pausedOverlayWrapper</code> (HTMLDivElement): The wrapper div element around the contents provided to the <code>pausedOverlay</code> prop. This should be null if no <code>pausedOverlay</code> was provided.</li><li><code>loadingOverlayWrapper</code> (HTMLDivElement): The wrapper div element around the contents provided to the <code>loadingOverlay</code> prop. This should be null if no <code>loadingOverlay</code> was provided.</li>",5),X={href:"https://testing-library.com/docs/react-testing-library/api#render-result",target:"_blank",rel:"noopener noreferrer"},Z=(0,r.Uk)("All properties returned by react-testing-library's render function"),$=(0,r.Wm)("h5",{id:"advancevideotime",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#advancevideotime","aria-hidden":"true"},"#"),(0,r.Uk)(" advanceVideoTime")],-1),ee=(0,r.Wm)("p",null,[(0,r.Uk)("Syntactic sugar for "),(0,r.Wm)("code",null,"act(() => jest.advanceTimersByTime(time));"),(0,r.Uk)(".")],-1),te=(0,r.Wm)("code",null,"advanceVideoTime",-1),ne=(0,r.Uk)(" takes a number of milliseconds to advance Jest's "),re={href:"https://jestjs.io/docs/jest-object#mock-timers",target:"_blank",rel:"noopener noreferrer"},oe=(0,r.Uk)("mock timers"),le=(0,r.Uk)(" by, and uses "),ae=(0,r.Wm)("code",null,"act()",-1),ie=(0,r.Uk)(" to ensure any resulting updates to the React component's state will be handled safely."),se=(0,r.Wm)("p",null,[(0,r.Wm)("em",null,"Arguments"),(0,r.Uk)(":")],-1),de=(0,r.Wm)("ul",null,[(0,r.Wm)("li",null,[(0,r.Wm)("code",null,"time"),(0,r.Uk)(" (Number): Number of milliseconds to advance timers by.")])],-1),ce=(0,r.Wm)("h3",{id:"integration-tests",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#integration-tests","aria-hidden":"true"},"#"),(0,r.Uk)(" Integration tests")],-1),me=(0,r.Uk)("The jest unit tests are built on a very heavy amount of mocking when it comes to the video's loading/playback behavior, so sometimes it's valuable to add some additional integration tests so we can feel truly confident that the component actually does work as expected in real-world scenarios. Integration tests live in the "),ue=(0,r.Wm)("code",null,"tests/cypress/component",-1),he=(0,r.Uk)(" directory and are written with "),pe={href:"https://github.com/cypress-io/cypress",target:"_blank",rel:"noopener noreferrer"},ge=(0,r.Uk)("cypress"),be=(0,r.Uk)("."),ke=(0,r.Wm)("ul",null,[(0,r.Wm)("li",null,[(0,r.Wm)("p",null,[(0,r.Wm)("code",null,"npm run test:integrationn"),(0,r.Uk)(" will run through all integration tests once.")])]),(0,r.Wm)("li",null,[(0,r.Wm)("p",null,[(0,r.Wm)("code",null,"npm run test:integration-test-runner"),(0,r.Uk)(" will open a browser window with the Cypress test runner, providing a nice UI which makes it much easier to troubleshoot your integration tests and see exactly what they are doing.")])])],-1),We=(0,r.Wm)("h2",{id:"builds",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#builds","aria-hidden":"true"},"#"),(0,r.Uk)(" Builds")],-1),fe=(0,r.Uk)("This project uses automated builds with "),ye={href:"https://travis-ci.com/",target:"_blank",rel:"noopener noreferrer"},ve=(0,r.Uk)("Travis CI"),Ue=(0,r.Uk)(". When a change is merged into the main branch, Travis will run all tests and if they pass, it will build and deploy a new version of the "),we=(0,r.Wm)("code",null,"react-hover-video-player",-1),Te=(0,r.Uk)(" package to npm using "),je={href:"https://semantic-release.gitbook.io/semantic-release/",target:"_blank",rel:"noopener noreferrer"},xe=(0,r.Uk)("semantic-release"),_e=(0,r.Uk)("."),Ee=(0,r.Wm)("p",null,[(0,r.Uk)("If you wish to do a production build locally for testing purposes, "),(0,r.Wm)("code",null,"npm run build"),(0,r.Uk)(" will build the component for production.")],-1),Ce=(0,r.Wm)("h2",{id:"commits",tabindex:"-1"},[(0,r.Wm)("a",{class:"header-anchor",href:"#commits","aria-hidden":"true"},"#"),(0,r.Uk)(" Commits")],-1),Ie=(0,r.Uk)("In order to work best with semantic-release, commit messages must follow the "),Ae={href:"https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines",target:"_blank",rel:"noopener noreferrer"},Ne=(0,r.Uk)("Angular commit guidelines"),Oe=(0,r.Uk)(":"),He=(0,r.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n&lt;BLANK LINE&gt;\n&lt;body&gt;\n&lt;BLANK LINE&gt;\n&lt;footer&gt;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>',1),Le=(0,r.Uk)("This formatting is enforced using "),Pe={href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"},Ve=(0,r.Uk)("Husky"),De=(0,r.Uk)(" and "),Re={href:"https://github.com/conventional-changelog/commitlint",target:"_blank",rel:"noopener noreferrer"},Be=(0,r.Uk)("Commitlint"),Me=(0,r.Uk)("."),ze=(0,r.Uk)("To make things easy, you can write your commit messages using "),Se={href:"https://github.com/commitizen/cz-cli",target:"_blank",rel:"noopener noreferrer"},Ge=(0,r.Uk)("Commitizen"),Ye=(0,r.Uk)(", a CLI tool which will provide an interactive experience for walking you through writing your commit message. All you have to do is stage your changes and run "),Fe=(0,r.Wm)("code",null,"npm run commit",-1),Je=(0,r.Uk)(" and it'll guide you from there."),Ke={render:function(e,t){const n=(0,r.up)("OutboundLink");return(0,r.wg)(),(0,r.j4)(r.HY,null,[o,l,(0,r.Wm)("ul",null,[a,(0,r.Wm)("li",null,[i,(0,r.Wm)("ul",null,[(0,r.Wm)("li",null,[s,d,c,(0,r.Wm)("a",m,[u,(0,r.Wm)(n)]),h,p])])])]),g,b,(0,r.Wm)("p",null,[k,(0,r.Wm)("a",W,[f,(0,r.Wm)(n)]),y,(0,r.Wm)("a",v,[U,(0,r.Wm)(n)]),w]),(0,r.Wm)("p",null,[T,j,x,(0,r.Wm)("a",_,[E,(0,r.Wm)(n)]),C]),I,A,(0,r.Wm)("p",null,[N,O,H,(0,r.Wm)("a",L,[P,(0,r.Wm)(n)]),V,(0,r.Wm)("a",D,[R,(0,r.Wm)(n)]),B]),(0,r.Wm)("ul",null,[M,(0,r.Wm)("li",null,[(0,r.Wm)("p",null,[z,S,G,Y,(0,r.Wm)("a",F,[J,(0,r.Wm)(n)]),K])])]),q,(0,r.Wm)("ul",null,[Q,(0,r.Wm)("li",null,[(0,r.Wm)("a",X,[Z,(0,r.Wm)(n)])])]),$,ee,(0,r.Wm)("p",null,[te,ne,(0,r.Wm)("a",re,[oe,(0,r.Wm)(n)]),le,ae,ie]),se,de,ce,(0,r.Wm)("p",null,[me,ue,he,(0,r.Wm)("a",pe,[ge,(0,r.Wm)(n)]),be]),ke,We,(0,r.Wm)("p",null,[fe,(0,r.Wm)("a",ye,[ve,(0,r.Wm)(n)]),Ue,we,Te,(0,r.Wm)("a",je,[xe,(0,r.Wm)(n)]),_e]),Ee,Ce,(0,r.Wm)("p",null,[Ie,(0,r.Wm)("a",Ae,[Ne,(0,r.Wm)(n)]),Oe]),He,(0,r.Wm)("p",null,[Le,(0,r.Wm)("a",Pe,[Ve,(0,r.Wm)(n)]),De,(0,r.Wm)("a",Re,[Be,(0,r.Wm)(n)]),Me]),(0,r.Wm)("p",null,[ze,(0,r.Wm)("a",Se,[Ge,(0,r.Wm)(n)]),Ye,Fe,Je])],64)}}}}]);